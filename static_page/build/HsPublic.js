!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.HsDataFactoryList=t():e.HsDataFactoryList=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){"use strict";var n=t(2)["default"];Object.defineProperty(exports,"__esModule",{value:!0});var r=t(3),o=n(r),s=t(37),i=n(s),a={wizard:"http://open.hs.net/quote/v1/wizard",kline:"http://open.hs.net/quote/v1/kline",real:"http://open.hs.net/quote/v1/real",trend:"http://open.hs.net/quote/v1/trend",holiday:"http://open.hs.net/quote/v1/market/holiday"},u={__tokenServer:new i["default"]};for(var l in a){var c=l,f=a[l];!function(e){u[c]=function(t,n){var r={};n=n||{},r.reqData=t,r.url=e,r.tokenServer=u.__tokenServer;for(var s in n)r[s]=n[s];return new o["default"](r)}}(f)}exports["default"]=u,e.exports=exports["default"]},function(e,exports){"use strict";exports["default"]=function(e){return e&&e.__esModule?e:{"default":e}},exports.__esModule=!0},function(e,exports,t){"use strict";var n=t(4)["default"],r=t(18)["default"],o=t(29)["default"],s=t(32)["default"],i=t(2)["default"];Object.defineProperty(exports,"__esModule",{value:!0});var a=t(33),u=i(a),l=t(35),c=i(l),f=t(36),p=i(f),d=c["default"].HsInstance.reqTimeSpan,h=function(e){function t(e){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e.url,this.reqData=e.reqData,this.tokenServer=e.tokenServer,this.loop=e.loop||!1,this.timeSpan=e.timeSpan||d}return r(t,e),o(t,[{key:"init",value:function(){this.request()}},{key:"getRemainTime",value:function(){var e=Date.now(),t=e-this.lastReqTime;return Math.max(this.timeSpan-t,0)}},{key:"onDataReady",value:function(e){return this.on("dataReady",e),this}},{key:"cancelLoop",value:function(){this.loop=!1}},{key:"_requestAgain",value:function(){var e=this,t=this.getRemainTime();setTimeout(function(){e.request()},t)}},{key:"request",value:function(){var e=this;this.lastReqTime=Date.now(),this.tokenServer.isTokenValid()&&(this.token=this.tokenServer.getToken(),u["default"]({url:this.url,data:this.reqData,headers:{Authorization:"Bearer "+this.token},timeout:d}).then(function(t){e.emit("dataReady",t.data)}).fail(function(t){var n=void 0;if(t||t.responseText)try{n=JSON.parse(t.responseText)}catch(t){n={error:"hs_server_unknown_error"}}e.emit("error",n),console.log(n),n&&n.error&&"invalid_token"==n.error&&e.tokenServer.isTokenValid()&&e.token==e.tokenServer.getToken()&&e.tokenServer.requestToken(),e.loop||e._requestAgain()}).always(function(){e.loop&&e._requestAgain()}))}}]),t}(p["default"]);exports["default"]=h,e.exports=exports["default"]},function(e,exports,t){"use strict";var n=t(5)["default"];exports["default"]=function(e,t,r){for(var o=!0;o;){var s=e,i=t,a=r;u=c=l=void 0,o=!1,null===s&&(s=Function.prototype);var u=n(s,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;return void 0===l?void 0:l.call(a)}var c=Object.getPrototypeOf(s);if(null===c)return void 0;e=c,t=i,r=a,o=!0}},exports.__esModule=!0},function(e,exports,t){e.exports={"default":t(6),__esModule:!0}},function(e,exports,t){var $=t(7);t(8),e.exports=function(e,t){return $.getDesc(e,t)}},function(e,exports){var t=Object;e.exports={create:t.create,getProto:t.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:t.getOwnPropertyDescriptor,setDesc:t.defineProperty,setDescs:t.defineProperties,getKeys:t.keys,getNames:t.getOwnPropertyNames,getSymbols:t.getOwnPropertySymbols,each:[].forEach}},function(e,exports,t){var n=t(9);t(13)("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},function(e,exports,t){var n=t(10),r=t(12);e.exports=function(e){return n(r(e))}},function(e,exports,t){var n=t(11);e.exports=0 in Object("z")?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,exports){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e,exports){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,exports,t){e.exports=function(e,n){var r=t(14),o=(t(16).Object||{})[e]||Object[e],s={};s[e]=n(o),r(r.S+r.F*t(17)(function(){o(1)}),"Object",s)}},function(e,exports,t){var n=t(15),r=t(16),o="prototype",s=function(e,t){return function(){return e.apply(t,arguments)}},i=function(e,t,a){var u,l,c,f,p=e&i.G,d=e&i.P,h=p?n:e&i.S?n[t]:(n[t]||{})[o],exports=p?r:r[t]||(r[t]={});p&&(a=t);for(u in a)l=!(e&i.F)&&h&&u in h,l&&u in exports||(c=l?h[u]:a[u],p&&"function"!=typeof h[u]?f=a[u]:e&i.B&&l?f=s(c,n):e&i.W&&h[u]==c?!function(e){f=function(t){return this instanceof e?new e(t):e(t)},f[o]=e[o]}(c):f=d&&"function"==typeof c?s(Function.call,c):c,exports[u]=f,d&&((exports[o]||(exports[o]={}))[u]=c))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,e.exports=i},function(e,exports){var t="undefined",n=e.exports=typeof window!=t&&window.Math==Math?window:typeof self!=t&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,exports){var t=e.exports={version:"1.2.1"};"number"==typeof __e&&(__e=t)},function(e,exports){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,exports,t){"use strict";var n=t(19)["default"],r=t(21)["default"];exports["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=n(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r?r(e,t):e.__proto__=t)},exports.__esModule=!0},function(e,exports,t){e.exports={"default":t(20),__esModule:!0}},function(e,exports,t){var $=t(7);e.exports=function(e,t){return $.create(e,t)}},function(e,exports,t){e.exports={"default":t(22),__esModule:!0}},function(e,exports,t){t(23),e.exports=t(16).Object.setPrototypeOf},function(e,exports,t){var n=t(14);n(n.S,"Object",{setPrototypeOf:t(24).set})},function(e,exports,t){var n=t(7).getDesc,r=t(25),o=t(26),s=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,r,o){try{o=t(27)(Function.call,n(Object.prototype,"__proto__").set,2),o(e,[]),r=!(e instanceof Array)}catch(i){r=!0}return function(e,t){return s(e,t),r?e.__proto__=t:o(e,t),e}}({},!1):void 0),check:s}},function(e,exports){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,exports,t){var n=t(25);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,exports,t){var n=t(28);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,exports){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,exports,t){"use strict";var n=t(30)["default"];exports["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),n(e,o.key,o)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),exports.__esModule=!0},function(e,exports,t){e.exports={"default":t(31),__esModule:!0}},function(e,exports,t){var $=t(7);e.exports=function(e,t,n){return $.setDesc(e,t,n)}},function(e,exports){"use strict";exports["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},exports.__esModule=!0},function(e,exports,t){"use strict";function n(e){return s["default"].compat(e)}var r=t(2)["default"];Object.defineProperty(exports,"__esModule",{value:!0});var o=t(34),s=r(o);exports["default"]=n,e.exports=exports["default"]},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  * Reqwest! A general purpose XHR connection manager
	  * license MIT (c) Dustin Diaz 2015
	  * https://github.com/ded/reqwest
	  */
!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="function"==typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||o||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var o=uniqid++,s=e.jsonpCallback||"callback",i=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),a=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),u=r.match(a),l=doc.createElement("script"),c=0,f=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?r=r.replace(a,"$1="+i):i=u[3]:r=urlappend(r,s+"="+i),context[i]=generalCallback,l.type="text/javascript",l.src=r,l.async=!0,"undefined"==typeof l.onreadystatechange||f||(l.htmlFor=l.id="_reqwest_"+o),l.onload=l.onreadystatechange=function(){return l[readyState]&&"complete"!==l[readyState]&&"loaded"!==l[readyState]||c?!1:(l.onload=l.onreadystatechange=null,l.onclick&&l.onclick(),t(lastValue),lastValue=void 0,head.removeChild(l),void(c=1))},head.appendChild(l),{abort:function(){l.onload=l.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(l),c=1}}}function getRequest(e,t){var n,r=this.o,o=(r.method||"GET").toUpperCase(),s="string"==typeof r?r:r.url,i=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,a=!1;return"jsonp"!=r.type&&"GET"!=o||!i||(s=urlappend(s,i),i=null),"jsonp"==r.type?handleJsonp(r,e,t,s):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(o,s,r.async===!1?!1:!0),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),a?setTimeout(function(){n.send(i)},200):n.send(i),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return null===e?void 0:e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,o,s,i=e.name,a=e.tagName.toLowerCase(),u=function(e){e&&!e.disabled&&t(i,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&i)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),o=e.value,(!(n||r)||e.checked)&&t(i,normalize(n&&""===o?"on":o)));break;case"textarea":t(i,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())u(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(s=0;e.length&&s<e.length;s++)e.options[s].selected&&u(e.options[s])}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,o,s;for(r=0;r<t.length;r++)for(s=e[byTag](t[r]),o=0;o<s.length;o++)serial(s[o],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var o,s,i,a=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)i=t[s],n||a.test(e)?r(e,i):buildParams(e+"["+("object"==typeof i?s:"")+"]",i,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],n,r);else r(e,t)}var context=this,doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0],httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,o=t||!1,s=[],i=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,s[s.length]=i(e)+"="+i(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)a(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],o,a);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={HsInstance:{reqTimeSpan:5e3},TokenServer:{reqTokenTimeSpan:5e3},LsTokenKey:"HS_TOKEN"},e.exports=exports["default"]},function(e,exports,t){var n;(function(){"use strict";function r(){}function o(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}var i=r.prototype,exports=this,a=exports.EventEmitter;i.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,t){var n,r=this.getListenersAsObject(e),s="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],t)&&r[n].push(s?t:{listener:t,once:!1});return this},i.on=s("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=s("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var n,r,s=this.getListenersAsObject(e);for(r in s)s.hasOwnProperty(r)&&(n=o(s[r],t),-1!==n&&s[r].splice(n,1));return this},i.off=s("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var r,o,s=e?this.removeListener:this.addListener,i=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(o=t[r])&&("function"==typeof o?s.call(this,r,o):i.call(this,r,o));return this},i.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},i.removeAllListeners=s("removeEvent"),i.emitEvent=function(e,t){var n,r,o,s,i,a=this.getListenersAsObject(e);for(s in a)if(a.hasOwnProperty(s))for(n=a[s].slice(0),o=n.length;o--;)r=n[o],r.once===!0&&this.removeListener(e,r.listener),i=r.listener.apply(this,t||[]),i===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},i.trigger=s("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return exports.EventEmitter=a,r},n=function(){return r}.call(exports,t,exports,e),!(void 0!==n&&(e.exports=n))}).call(this)},function(e,exports,t){"use strict";var n=t(4)["default"],r=t(18)["default"],o=t(29)["default"],s=t(32)["default"],i=t(2)["default"];Object.defineProperty(exports,"__esModule",{value:!0});var a=t(33),u=i(a),l=t(38),c=t(35),f=i(c),p=t(36),d=i(p),h=t(39),_=i(h),y=f["default"].LsTokenKey,v=[1,1,2,3,5,8,13,21,34,55,89,144,-1],m=function(e){function t(){s(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.token=_["default"].getItem(y),this.tokenValid=!0,this.token||this.requestToken(),this.fibsIndex=0}return r(t,e),o(t,[{key:"getToken",value:function(){return this.token}},{key:"reset",value:function(){return this.fibsIndex=0,this}},{key:"isTokenValid",value:function(){return this.tokenValid}},{key:"getRemainTime",value:function(){var e=v[this.fibsIndex];return-1!=e?(this.fibsIndex++,1e3*e):void this.emit("try request token failed")}},{key:"_requestAgain",value:function(){var e=this,t=this.getRemainTime();setTimeout(function(){e.requestToken()},t)}},{key:"clearTokenCache",value:function(){return _["default"].removeItem(y),this}},{key:"requestToken",value:function(){var e=this;this.lastReqTime=Date.now(),this.tokenValid=!1,u["default"]({url:l.tokenUrl,dataType:"jsonp"}).then(function(t){var n=t.results.access_token;return n===e.token?void e._requestAgain():(e.token=n,e.tokenValid=!0,_["default"].setItem(y,n),void e.reset())}).fail(function(){e._requestAgain()})}}]),t}(d["default"]);exports["default"]=m,e.exports=exports["default"]},function(e,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]={tokenUrl:"http://api.wallstreetcn.com/v2/itn/token/public"},e.exports=exports["default"]},function(e,exports){"use strict";function t(){if(window&&window.localStorage){var e="__test",t=window.localStorage;try{return t.setItem(e,"1"),t.removeItem(e),!0}catch(n){return!1}}return!1}Object.defineProperty(exports,"__esModule",{value:!0});var n={};t()&&(n=window.localStorage);var r={getItem:function(e){return n[e]},setItem:function(e,t){n[e]=t},removeItem:function(e){delete n[e]}};exports["default"]=r,e.exports=exports["default"]}])});